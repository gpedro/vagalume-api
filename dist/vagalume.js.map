{"version":3,"sources":["../index.js"],"names":[],"mappings":";;;;AAAA;;;;AACA;;AACA;;;;;;;;;;AAEA,IAAM,aAAa,6BAAnB;AACA,IAAM,aAAa,6BAAnB;;IAEM,Q;AAEL,mBAAY,MAAZ,EAAoB;AAAA;;AACnB,OAAK,MAAL,GAAc,MAAd;AACA;;;;yBAEM,G,EAAkB;AAAA,OAAb,MAAa,uEAAJ,EAAI;;AACxB,OAAI,KAAK,MAAL,IAAe,CAAC,OAAO,QAAP,CAApB,EAAsC;AACrC,WAAO,QAAP,IAAmB,KAAK,MAAxB;AACA;;AAED,OAAI,KAAK,4BAAU,MAAV,CAAT;AACA,UAAO,yBAAS,GAAT,SAAgB,EAAhB,EAAsB,IAAtB,CAA2B;AAAA,WAAO,IAAI,IAAJ,EAAP;AAAA,IAA3B,CAAP;AACA;;;;yEAEY,O;QAAQ,O,uEAAU,E;;;;;;AACxB,Y,GAAO,uBAAQ,OAAR,C;yCACN,KAAK,MAAL,CAAe,UAAf,SAA6B,IAA7B,gBAA8C,OAA9C,C;;;;;;;;;;;;;;;;;;;2EAGK,O;;;;;AACZ,YAAI,QAAQ,KAAR,KAAkB,QAAQ,GAAR,IAAe,QAAQ,GAAzC,CAAJ,EAAmD;AAClD,gBAAO,QAAQ,GAAf;AACA,gBAAO,QAAQ,GAAf;AACA;;AAED,YAAI,QAAQ,KAAZ,EAAmB;AAClB,aAAI,QAAQ,KAAR,YAAyB,KAA7B,EAAoC;AACnC,kBAAQ,KAAR,GAAgB,QAAQ,KAAR,CAAc,IAAd,CAAmB,GAAnB,CAAhB;AACA;AACD;;0CAEM,KAAK,MAAL,CAAe,UAAf,kBAAwC,OAAxC,C;;;;;;;;;;;;;;;;;;;;QAGK,I,uEAAO,K;QAAQ,K,uEAAQ,E;QAAI,K,uEAAQ,C;QAAG,O,uEAAU,E;;;;;cACxD,CAAC,KAAD,EAAQ,SAAR,EAAmB,QAAnB,EAA6B,KAA7B,EAAoC,OAApC,CAA4C,IAA5C,MAAsD,CAAC,C;;;;;cACpD,IAAI,KAAJ,CAAU,uDAAV,C;;;;AAGP,gBAAQ,CAAR,GAAY,SAAS,EAArB;AACA,gBAAQ,KAAR,GAAgB,SAAS,CAAzB;;0CAEO,KAAK,MAAL,CAAe,UAAf,gBAAoC,IAApC,EAA4C,OAA5C,C;;;;;;;;;;;;;;;;;;;2EAGU,M,EAAQ,O;;;;;;AACnB,Y,GAAO,uBAAQ,MAAR,C;0CACN,KAAK,MAAL,CAAe,UAAf,SAA6B,IAA7B,4BAA0D,OAA1D,C;;;;;;;;;;;;;;;;;;;2EAGO,O;;;;;0CACP,KAAK,MAAL,CAAe,UAAf,oBAA0C,OAA1C,C;;;;;;;;;;;;;;;;;;;2EAGG,O;;;;;0CACH,KAAK,MAAL,CAAe,UAAf,qBAA2C,OAA3C,C;;;;;;;;;;;;;;;;;;;2EAGU,Q;QAAU,K,uEAAQ,C;QAAG,O,uEAAU,E;;;;;AAChD,gBAAQ,MAAR,GAAiB,QAAjB;AACA,gBAAQ,KAAR,GAAgB,SAAS,CAAzB;0CACO,KAAK,MAAL,CAAe,UAAf,iBAAuC,OAAvC,C;;;;;;;;;;;;;;;;;;;;;AAIT,IAAI,OAAO,MAAP,KAAkB,WAAlB,IAAiC,OAAO,OAA5C,EAAqD;AACpD,QAAO,OAAP,GAAiB,QAAjB;AACA,CAFD,MAEO;AACN,QAAO,QAAP,GAAkB,QAAlB;AACA","file":"vagalume.js","sourcesContent":["import fetch from 'node-fetch';\nimport { stringify } from 'querystring';\nimport dashify from 'dashify';\n\nconst webBaseUrl = 'https://www.vagalume.com.br';\nconst apiBaseUrl = 'https://api.vagalume.com.br';\n\nclass Vagalume {\n\n\tconstructor(apikey) {\n\t\tthis.apikey = apikey;\n\t}\n\n\t_fetch(url, params = []) {\n\t\tif (this.apikey && !params['apikey']) {\n\t\t\tparams['apikey'] = this.apikey;\n\t\t}\n\n\t\tvar qs = stringify(params);\n\t\treturn fetch(`${url}?${qs}`).then(res => res.json())\n\t}\n\n\tasync artist(artist, options = {}) {\n\t\tconst slug = dashify(artist);\n\t\treturn this._fetch(`${webBaseUrl}/${slug}/index.js`, options);\n\t}\n\n\tasync lyrics(options) {\n\t\tif (options.musid && (options.art || options.mus)) {\n\t\t\tdelete options.art;\n\t\t\tdelete options.mus;\n\t\t}\n\n\t\tif (options.extra) {\n\t\t\tif (options.extra instanceof Array) {\n\t\t\t\toptions.extra = options.extra.join(',');\n\t\t\t}\n\t\t}\n\n\t\treturn this._fetch(`${apiBaseUrl}/search.php`, options);\n\t}\n\n\tasync search(type = 'art' , query = '', limit = 5, options = {}) {\n\t\tif (['art', 'excerpt', 'artmus', 'alb'].indexOf(type) === -1) {\n\t\t\tthrow new Error('Tipo inválido. Disponíveis: art, excerpt, artmus, alb');\n\t\t}\n\t\t\n\t\toptions.q = query || '';\n\t\toptions.limit = limit || 5;\n\n\t\treturn this._fetch(`${apiBaseUrl}/search.${type}`, options);\n\t}\n\n\tasync discography(artist, options) {\n\t\tconst slug = dashify(artist);\n\t\treturn this._fetch(`${webBaseUrl}/${slug}/discografia/index.js`, options);\n\t}\n\n\tasync hotspots(options) {\n\t\treturn this._fetch(`${apiBaseUrl}/hotspots.php`, options);\n\t}\n\n\tasync news(options) {\n\t\treturn this._fetch(`${webBaseUrl}/news/index.js`, options);\t\n\t}\n\n\tasync artistImage(artistId, limit = 3, options = {}) {\n\t\toptions.bandID = artistId;\n\t\toptions.limit = limit || 3;\n\t\treturn this._fetch(`${apiBaseUrl}/image.php`, options);\n\t}\n}\n\nif (typeof module !== 'undefined' && module.exports) {\n\tmodule.exports = Vagalume;\n} else {\n\twindow.Vagalume = Vagalume;\n}"]}